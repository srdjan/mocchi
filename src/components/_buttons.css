/* ---- Button Components ---- */
@layer components {
  /* Base Button Styles */
  button,
  input[type="submit"],
  input[type="button"],
  [role="button"] {
    /* Component-specific custom properties */
    --button-bg: var(--sm-bg);
    --button-color: var(--sm-fg);
    --button-border-color: var(--sm-border);
    --button-hover-bg: var(--sm-input-bg);
    --button-hover-color: var(--sm-fg);
    --button-active-bg: var(--sm-border);
    --button-active-color: var(--sm-fg);
    --button-focus-ring-color: var(--sm-focus-ring);
    --button-padding-block: 0.5rem;
    --button-padding-inline: 0.75rem;
    --button-font-weight: var(--sm-weight-medium);
    --button-radius: var(--sm-radius);
    
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5em;
    font-weight: var(--button-font-weight);
    text-align: center;
    vertical-align: middle;
    cursor: pointer;
    user-select: none;
    padding-block: var(--button-padding-block);
    padding-inline: var(--button-padding-inline);
    background-color: var(--button-bg);
    color: var(--button-color);
    border: 1px solid var(--button-border-color);
    border-radius: var(--button-radius);
    transition:
      color var(--sm-transition-fast),
      background-color var(--sm-transition-fast),
      border-color var(--sm-transition-fast),
      box-shadow var(--sm-transition-fast);
    
    /* Icon sizing */
    & svg {
      width: 1em;
      height: 1em;
      flex-shrink: 0;
    }
    
    &:hover {
      background-color: var(--button-hover-bg);
      color: var(--button-hover-color);
    }
    
    &:active {
      background-color: var(--button-active-bg);
      color: var(--button-active-color);
    }
    
    &:focus-visible {
      outline: 0;
      box-shadow: 0 0 0 3px var(--button-focus-ring-color);
    }
    
    &:disabled {
      opacity: 0.65;
      cursor: not-allowed;
      pointer-events: none;
    }
  }
  
  /* Primary Button */
  button[primary],
  input[type="submit"][primary],
  input[type="button"][primary],
  [role="button"][primary] {
    --button-bg: var(--sm-accent);
    --button-color: white;
    --button-border-color: var(--sm-accent);
    --button-hover-bg: var(--sm-accent-subtle);
    --button-hover-color: white;
    --button-active-bg: var(--sm-accent-subtle);
    --button-active-color: white;
  }
  
  /* Secondary Button */
  button[secondary],
  input[type="submit"][secondary],
  input[type="button"][secondary],
  [role="button"][secondary] {
    --button-bg: var(--sm-input-bg);
    --button-color: var(--sm-accent);
    --button-border-color: var(--sm-border);
    --button-hover-bg: color-mix(in srgb, var(--sm-accent) 10%, var(--sm-input-bg));
    --button-hover-color: var(--sm-accent-subtle);
    --button-active-bg: color-mix(in srgb, var(--sm-accent) 15%, var(--sm-input-bg));
    --button-active-color: var(--sm-accent-subtle);
  }
  
  /* Outline Button */
  button[outline],
  input[type="submit"][outline],
  input[type="button"][outline],
  [role="button"][outline] {
    --button-bg: transparent;
    --button-color: var(--sm-accent);
    --button-border-color: var(--sm-accent);
    --button-hover-bg: color-mix(in srgb, var(--sm-accent) 10%, transparent);
    --button-hover-color: var(--sm-accent-subtle);
    --button-active-bg: color-mix(in srgb, var(--sm-accent) 15%, transparent);
    --button-active-color: var(--sm-accent-subtle);
  }
  
  /* Ghost Button */
  button[ghost],
  input[type="submit"][ghost],
  input[type="button"][ghost],
  [role="button"][ghost] {
    --button-bg: transparent;
    --button-color: var(--sm-fg);
    --button-border-color: transparent;
    --button-hover-bg: var(--sm-input-bg);
    --button-hover-color: var(--sm-accent);
    --button-active-bg: var(--sm-border);
    --button-active-color: var(--sm-accent-subtle);
  }
  
  /* Success Button */
  button[success],
  input[type="submit"][success],
  input[type="button"][success],
  [role="button"][success] {
    --button-bg: var(--sm-success);
    --button-color: white;
    --button-border-color: var(--sm-success);
    --button-hover-bg: var(--sm-success-subtle);
    --button-hover-color: white;
    --button-active-bg: var(--sm-success-subtle);
    --button-active-color: white;
    --button-focus-ring-color: color-mix(in srgb, var(--sm-success) 50%, transparent);
  }
  
  /* Warning Button */
  button[warning],
  input[type="submit"][warning],
  input[type="button"][warning],
  [role="button"][warning] {
    --button-bg: var(--sm-warning);
    --button-color: white;
    --button-border-color: var(--sm-warning);
    --button-hover-bg: var(--sm-warning-subtle);
    --button-hover-color: white;
    --button-active-bg: var(--sm-warning-subtle);
    --button-active-color: white;
    --button-focus-ring-color: color-mix(in srgb, var(--sm-warning) 50%, transparent);
  }
  
  /* Error Button */
  button[error],
  input[type="submit"][error],
  input[type="button"][error],
  [role="button"][error] {
    --button-bg: var(--sm-error);
    --button-color: white;
    --button-border-color: var(--sm-error);
    --button-hover-bg: var(--sm-error-subtle);
    --button-hover-color: white;
    --button-active-bg: var(--sm-error-subtle);
    --button-active-color: white;
    --button-focus-ring-color: color-mix(in srgb, var(--sm-error) 50%, transparent);
  }
  
  /* Size Variations */
  button[size="sm"],
  input[type="submit"][size="sm"],
  input[type="button"][size="sm"],
  [role="button"][size="sm"] {
    --button-padding-block: 0.25rem;
    --button-padding-inline: 0.5rem;
    font-size: var(--sm-font-sm);
  }
  
  button[size="lg"],
  input[type="submit"][size="lg"],
  input[type="button"][size="lg"],
  [role="button"][size="lg"] {
    --button-padding-block: 0.75rem;
    --button-padding-inline: 1rem;
    font-size: var(--sm-font-md);
  }
  
  /* Full Width Button */
  button[full-width],
  input[type="submit"][full-width],
  input[type="button"][full-width],
  [role="button"][full-width] {
    width: 100%;
  }
  
  /* Icon Button */
  button[icon],
  input[type="submit"][icon],
  input[type="button"][icon],
  [role="button"][icon] {
    --button-padding-block: 0.5rem;
    --button-padding-inline: 0.5rem;
    aspect-ratio: 1/1;
    
    & svg {
      width: 1.25em;
      height: 1.25em;
    }
  }
  
  /* Circular Button */
  button[circular],
  input[type="submit"][circular],
  input[type="button"][circular],
  [role="button"][circular] {
    --button-radius: 50%;
    aspect-ratio: 1/1;
    padding: 0.5rem;
    
    &[size="sm"] {
      padding: 0.25rem;
    }
    
    &[size="lg"] {
      padding: 0.75rem;
    }
  }
  
  /* Button Group */
  .button-group {
    display: inline-flex;
    
    & > button,
    & > input[type="submit"],
    & > input[type="button"],
    & > [role="button"] {
      border-radius: 0;
      
      &:not(:last-child) {
        border-right-width: 0;
      }
      
      &:first-child {
        border-top-left-radius: var(--sm-radius);
        border-bottom-left-radius: var(--sm-radius);
      }
      
      &:last-child {
        border-top-right-radius: var(--sm-radius);
        border-bottom-right-radius: var(--sm-radius);
      }
    }
  }
}
